<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style type="text/css"></style>
  <body>
    <div class="d3Chart"></div>
  </body>
  <!-- D3 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <script type="text/javascript">
    // 节点集
    // radius 节点半径
    const nodes = [
      { name: '重庆市', radius: 4 },
      { name: '北碚区', radius: 3 },
      { name: '渝北区', radius: 3 },
      { name: '江北区', radius: 3 },
      { name: '巴南区', radius: 3 },
      { name: '沙坪坝区', radius: 3 },
      { name: '大渡口', radius: 3 },
      { name: '万州区', radius: 3 },
      { name: '天府镇', radius: 2 },
      { name: '水土镇', radius: 2 },
      { name: '蔡家镇', radius: 2 },
      { name: '土场镇', radius: 2 },
      { name: '两江名居', radius: 1 },
      { name: '上城中央', radius: 1 },
      { name: '灯塔', radius: 1 }
    ]
    // 边集
    // value 控制线的长短
    const edges = [
      { source: 0, target: 1, value: 2 },
      { source: 0, target: 2, value: 2 },
      { source: 0, target: 3, value: 2 },
      { source: 0, target: 4, value: 2 },
      { source: 0, target: 5, value: 2 },
      { source: 0, target: 6, value: 2 },
      { source: 0, target: 7, value: 2 },
      { source: 2, target: 8, value: 1.5 },
      { source: 2, target: 9, value: 1.5 },
      { source: 2, target: 10, value: 1.5 },
      { source: 2, target: 11, value: 1.5 },
      { source: 11, target: 12, value: 1 },
      { source: 11, target: 13, value: 1 },
      { source: 11, target: 14, value: 1 }
    ]

    // 画布
    const width = 1000
    const height = 1000
    const svg = d3
      .select('.d3Chart')
      .append('svg')
      .attr('width', width)
      .attr('height', height)
      .style('background-color', '#1a3055')
    // 图
    const chart = svg.append('g')

    // 创建颜色比例尺
    const colorScale = d3.scaleOrdinal(d3.quantize(d3.interpolateRainbow, nodes.length + 1))

    // .forceSimulation() 创建一个力模拟
    // .force(name[, force]) 如果指定了力，则为指定的名称分配力并返回此模拟。
    // d3.forceLink() 适用每个链接的源和目标 --链接力
    // d3.forceManyBody() -- 多体力
    // d3.forceCenter(x, y) 使用指定的x和y坐标创建新的定心力。如果未指定x和y，则默认为⟨0,0⟩。
    const force = d3
      .forceSimulation()
      .force('link', d3.forceLink())
      .force('charge', d3.forceManyBody())
      .force('center', d3.forceCenter(width / 2, height / 2))
  </script>
</html>
